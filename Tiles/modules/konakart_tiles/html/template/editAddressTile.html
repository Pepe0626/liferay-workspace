<%
//(c) 2015 DS Data Systems UK Ltd, All rights reserved.
//
//DS Data Systems and KonaKart and their respective logos, are
//trademarks of DS Data Systems UK Ltd. All rights reserved.
//
//The information in this document is free software;you can redistribute
//it and/or modify it under the terms of the GNU Lesser General Public
//License as published by the Free Software Foundation; either
//version 2.1 of the License, or (at your option) any later version.
//
//This software is distributed in the hope that it will be useful,
//but WITHOUT ANY WARRANTY; without even the implied warranty of
//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
//Lesser General Public License for more details.
%>

<h1 id="kk-page-title"><%=getMsg("customer.info.editaddr")%></h1>
<div class="kk-content-area kk-rounded-corners">
	<div>
		<form action="#" id="kk-edit-address-form" method="post">
			<% var opcbilling = null;%> 
			<% var opcdelivery = null;%> 	
			<div class="kk-form-section">
				<div>
					<h3><%=getMsg("customer.info.personal.details")%><span class="kk-required-text"><span class="kk-required-icon kk-required-blue"></span>&nbsp;<%=getMsg("customer.info.required.fields")%></span></h3>							
				</div>
				<div class="kk-form-section-fields">
					<div class="kk-form-section-divider"></div>
					<div class="kk-form-input kk-radio-buttons">
						<label><%=getMsg("customer.info.gender")%></label>
						<%var checkedM = (selectedAddr.gender.toUpperCase()=='M')?'checked':''; %>						
						<span class="kk-radio-button"><input type="radio" name="kkGender" value="m" <%=checkedM%>> <%=getMsg("customer.info.male")%></span> 
						<%var checkedF = (selectedAddr.gender.toUpperCase()=='F')?'checked':''; %>						
						<span class="kk-radio-button"><input type="radio" name="kkGender" value="f" <%=checkedF%>> <%=getMsg("customer.info.female")%></span>
						<span class="kk-required-icon kk-required-blue"></span>	
						<span class="kk-validation-msg"></span>							
					</div>				
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.first.name")%></label>
						<input type="text" value='<%=selectedAddr.firstName%>' id="kkFirstName" name="kkFirstName"/>
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.last.name")%></label>
						<input type="text" value='<%=selectedAddr.lastName%>' id="kkLastName" name="kkLastName"/>
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>

				</div>
			</div>
			<div class="kk-form-section">
				<h3><%=getMsg("customer.info.company.details")%></h3>
				<div class="kk-form-section-fields">
					<div class="kk-form-section-divider"></div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.company.name")%></label>
						<input type="text" value='<%=selectedAddr.company%>' id="kkCompany" name="kkCompany"/>
						<span class="kk-validation-msg"></span>
					</div>
				</div>
			</div>
			<div class="kk-form-section">
				<h3><%=getMsg("customer.info.addr")%></h3>
				<div class="kk-form-section-fields">
					<div class="kk-form-section-divider"></div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.street.addr")%></label>
						<input type="text" value='<%=selectedAddr.streetAddress%>' id="kkStreetAddress" name="kkStreetAddress"/>
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.street.addr1")%></label>
						<input type="text" value='<%=selectedAddr.streetAddress1%>' id="kkStreetAddress1" name="kkStreetAddress1" />
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.suburb")%></label>
						<input  type="text" value='<%=selectedAddr.suburb%>' id="kkSuburb" name="kkSuburb"/>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.postcode")%></label>
						<input type="text" value='<%=selectedAddr.postcode%>' id="kkPostcode" name="kkPostcode" />
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.city")%></label>
						<input type="text" value='<%=selectedAddr.city%>' id="kkCity" name="kkCity" />
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input" id="kk-form-zone-select" >
						<label><%=getMsg("customer.info.state")%></label>
						<select id="kkStateList" name="kkStateList" class="kkState">
							<option value="-1"><%=getMsg("customer.info.select")%></option>
							<% for (var i = 0; i < zones.length; i++){ %>
								<% var zone = zones[i];%>								
								<%if (zone.zoneName == selectedAddr.state){ %>
									<option selected="selected" value="<%=zone.zoneName%>"><%=zone.zoneName%></option>
								<% } else { %>
									<option  value="<%=zone.zoneName%>"><%=zone.zoneName%></option>
								<% } %>														                 								
							<% } %>
						</select>
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input" id="kk-form-zone-input">
						<label><%=getMsg("customer.info.state")%></label>
						<input type="text" value='<%=selectedAddr.state%>' id="kkState" name="kkState" />
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.country")%></label>
							<select id="kkCountryId" name="kkCountryId" onchange="kk.changeCountry();">
								<option value="-1"><%=getMsg("customer.info.select")%></option>
									<%if (countries != null){%>
										<%for ( var i = 0; i < countries.length; i++)	{%>
											<%var country = countries[i];%>
											<%if (country.id == selectedAddr.countryId){ %>
												<option selected="selected" value="<%=country.id%>"><%=country.name%></option>
											<% } else { %>
												<option value="<%=country.id%>"><%=country.name%></option>
											<% } %>														                 
										<% } %>           
									<% } %>																
							</select>
						<span class="kk-required-icon kk-required-green"></span>
						<span class="kk-validation-msg"></span>
					</div>
				</div>
			</div>
			<div class="kk-form-section">
				<h3><%=getMsg("customer.info.contact.info")%></h3>
				<div class="kk-form-section-fields">
					<div class="kk-form-section-divider"></div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.tel.number")%></label>
						<input type="text" value='<%=selectedAddr.telephoneNumber%>' id="kkTelephoneNumber" name="kkTelephoneNumber" />
						<span class="kk-required-icon kk-required-blue"></span>
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.tel.number1")%></label>
						<input type="text" value='<%=selectedAddr.telephoneNumber1%>' id="kkTelephoneNumber1" name="kkTelephoneNumber1" />
						<span class="kk-validation-msg"></span>
					</div>
					<div class="kk-form-input">
						<label><%=getMsg("customer.info.email")%></label>
						<input type="text" value='<%=selectedAddr.emailAddr%>'  id="kkEmailAddrOptional" name="kkEmailAddrOptional"/>
						<span class="kk-validation-msg"></span>
					</div>
				</div>
			</div>
			<%if (!selectedAddr.isPrimary){ %>
				<div class="kk-form-section">
					<h3><%=getMsg("customer.info.primary")%></h3>
					<div class="kk-form-section-fields">
						<div class="kk-form-section-divider"></div>
						<div class="kk-form-input">
							<label><%=getMsg("customer.info.setprimary")%></label>
							<input type="checkbox" id="kkSetAsPrimary" name="kkSetAsPrimary">
						</div>
					</div>
				</div>
			<% } %>
			<div class="kk-form-buttons">
				<a id="kk-edit-address-submit" class="kk-continue-button kk-button kk-small-rounded-corners"><span><%=getMsg("customer.info.update")%></span></a>
				<%if ((opcbilling == null || opcbilling.length() == 0) && (opcdelivery == null || opcdelivery.length() == 0)){ %>
					<a  id="kk-back-to-manage-address" class="kk-button kk-small-rounded-corners"><span><%=getMsg("customer.info.back")%></span></a>
				<% } else { %>
					<a  id="kk-back-to-manage-address" class="kk-button kk-small-rounded-corners"><span><%=getMsg("customer.info.back")%></span></a>
				<% } %>				
			</div>
			<input type="hidden" id="countryChange" name="countryChange" value="0"/>
		</form>
	</div>
</div>
