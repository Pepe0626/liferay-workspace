<%
//(c) 2015 DS Data Systems UK Ltd, All rights reserved.
//
//DS Data Systems and KonaKart and their respective logos, are
//trademarks of DS Data Systems UK Ltd. All rights reserved.
//
//The information in this document is free software;you can redistribute
//it and/or modify it under the terms of the GNU Lesser General Public
//License as published by the Free Software Foundation; either
//version 2.1 of the License, or (at your option) any later version.
//
//This software is distributed in the hope that it will be useful,
//but WITHOUT ANY WARRANTY; without even the implied warranty of
//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
//Lesser General Public License for more details.
%>

<div id="kkpwt-wishList" class="kkpwt-top-bar-menu-item">
	<span id="kkpwt-wishList-link">
		<%=getMsg("wishlist.tile.wishlist")%>
		<span id="kkpwt-num-items"> 
			<%if (numItems > 0) { %>
				(<%=numItems%>)
			<%}%>
		</span>
	</span>
	<div id="kkpwt-wishList-container">
		<div id="kkpwt-wishList-mouseover-shadow" class="kkpwt-slide-out-shadow"></div>
		<div id="kkpwt-wishList-contents" class="kkpwt-slide-out-contents kkpwt-shadow">
			<%if (wishListItems==null || wishListItems.length == 0) { %>
				<%=getMsg("wishlist.tile.empty")%>
			<%}else{%>
				<div id="kkpwt-wishList-items">
					<% for (var i = 0; i < wishListItems.length; i++){ %>
						<% var item = wishListItems[i];%>
						<%if (item.product != null) { %>
							<div class="kkpwt-wishList-item">
								<a href='#' class="kkpwt-wishList-item-image" id='<%="kkpwt-"+item.product.id%>'><img src="<%=item.prodImage%>" border="0" alt="<%=item.product.name%>" title=" <%=item.product.name%> "></a>
								<a href='#' class="kkpwt-wishList-item-title" id='<%="kkpwt-"+item.product.id%>'><%=item.product.name%></a>

								<%if (item.opts != null && item.opts.length > 0) {%>
									<%for ( var j = 0; j < item.opts.length; j++) {%>
										<%var opt = item.opts[j];%>
										<%if (opt.type == 0) {%> 
											<br><span class="kkct-wishList-item-option"> - <%=opt.name%>:&nbsp;<%=opt.value%></span>
										<%} else if (opt.type == 1) {%> 
											<br><span class="kkct-wishList-item-option"> - <%=opt.name%>:&nbsp;<%=opt.quantity%>&nbsp;<%=opt.value%></span>
										<%} else if (opt.type == 2) {%> 
											<br><span class="kkct-wishList-item-option"> - <%=opt.name%>:&nbsp;<%=opt.formattedCustPrice%></span>
										<%} else if (opt.type == 3 && !isWishList) {%> 
											<br><span class="kkct-wishList-item-option"> - <%=opt.name%>:&nbsp;<%=opt.customerText%></span>
										<%}%>					
									<%}%>
								<%}%>

								<div class="kkpwt-wishList-item-price">
									<%if (displayPriceWithTax) { %>		
										<%=formatMoney(item.finalPriceIncTax)%>
									<%}else{%>
										<%=formatMoney(item.finalPriceExTax)%>
									<%}%>
									&nbsp;<%=getMsg("wishlist.tile.quantity")%>:<%=item.quantity%>
								</div>
							</div>
						<%}%>
					<%}%>
				</div>
				<div id="kkpwt-subtotal-and-checkout">
					<div class="kkpwt-subtotal">
						<div class="kkpwt-subtotal-label"><%=getMsg("wishlist.tile.subtotal")%></div>						
						<%if (displayPriceWithTax) { %>		
							<div class="kkpwt-subtotal-amount"><%=formatMoney(wishList.finalPriceIncTax)%></div>
						<%}else{%>
							<div class="kkpwt-subtotal-amount"><%=formatMoney(wishList.finalPriceExTax)%></div>
						<%}%>
					</div>
				</div>
			<%}%>
		</div>
	</div>	
</div>

